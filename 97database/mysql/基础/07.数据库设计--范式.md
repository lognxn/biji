### 设计规范总结:
* 第一范式
    原子性, 每列不可再分割

* 第二范式
    依赖, 一张表一件事情

* 第三范式
    直接依赖, 每一列直接依赖


#### 一、数据规范化
    1. 什么是范式：
        好的数据库设计对数据的存储性能和后期的程序开发，都会产生重要的影响。
        建立科学的，规范的数据库就需要满足一些规则来优化数据的设计和存储。
        在关系型数据库中这些规则就称为范式。
    2. 这些范式是：
        第一范式、第二范式、第三范式
#### 二、第一范式
    1. 概念：
        在一个表中，表的每一列都不可再分割成更小的列，符合这个要求的表，就满足第一范式。
        第一范式又称为数据的原子性。
    2. 比如：
                                    人的身份信息表
        姓名和曾用名：                张三|狗娃
                                      李四|小三
            查询：
                select * from person where name like '%三%'
            修改：
                存在对列进行拆分的问题
            解决：
                创建2列，姓名，曾用名
                                
        发货地址：
            做为一个字段，看业务。如果地址中：省，市，区(县)
        
#### 三、第二范式
    1. 概念：
        在满足第一范式的前提下，一张表只描述一件事情。
        表中的每一个字段都依赖于主键。
    2. 示例：
        1) 考勤表：
            [员工编号，员工名，所在部门，考勤时间]
        2) 分成两张表
            [员工编号，员工名，所在部门]
            [考勤的编号，考勤时间，员工编号(外键)]
            
#### 四、第三范式：
    1. 概念：
        在满足第二范式的前提下，表中的每一列都直接依赖于主键，而不是通过其它的列来间接依赖于主键。
    2. 示例：
        1) 原表：
            [员工编号，员工名，所在部门，考勤时间]
        2) 按第二范式：
            [员工编号，员工名，所在部门]
                添加记录：
                    [1，张三，开发部]
                    [2，李四，开发部]
                    [3，王五，开发部]
            [考勤的编号，考勤时间，员工编号(外键)]
        3) 按第三范式：
            [员工编号，员工名，部门的编号(外键)]
            [部门编号，部门名称]
            [考勤的编号，考勤时间，员工编号(外键)]
#### 五、实际应用
    1. 性能 > 规范 为满足某种商业目标，数据库性能比规范化数据库更重要
        1) 通过在给定的表中添加额外的字段，以大量减少需要从中搜索信息所需的时间
            如果：学生成绩表，常常要计算学生的总分。总分=数学+语文+英语
            通过在给定的表中插入计算列（如成绩总分），以方便查询
        2) 在数据规范化同时，要综合考虑数据库的性能
    2.原则：用户需求>性能>规范
    
#### 六、案例：
    1. 需求:
        假设某建筑公司要设计一个数据库。公司的业务规则概括说明如下：
        公司承担多个工程项目，每一项工程有：工程号、工程名称、施工人员等
        公司有多名职工，每一名职工有：职工号、姓名、职务
        公司按照工时和小时工资率支付工资，小时工资率由职工的职务决定（例如，技术员的小时工资率与工程师不同）
        
    2. 请问如下设计有什么问题？
        工程号        工程名称        职工号        姓名            职务        小时工资率        工时
            A1        花园大厦            1001        杨国明        工程师        65                13
            A1        花园大厦            1002        班建斌        技术员        60                16
            A1        花园大厦            1004        伍岳林        律师            100                19
            B2        立交桥                1001        杨国明        工程师        65                13
            B2        立交桥                1003        鞠明亮        工人            55                17
            C3        临江饭店            1002        班建斌        技术员        60                18
            C3        临江饭店            1004        伍岳林        律师            100                14
            
        问题：
            表中描述了工程信息、员工信息、工时信息，不符合2NF。
            
    3. 符合第二范式的三张表:
        1) 工程表：[工程号，工程名称]
        2) 职工表：[职工号，姓名，职务，小时工资率]
        3) 工时表：[工程号，职工号，工时]
            
    4. 符合第三范式：
        1) 工程表：[工程号，工程名称]
        2) 职务表：[职务，小时工资率]
        3) 职工表：[职工号，姓名，职务]
        4) 工时表：[工程号，职工号，工时]
            
#### 七 .练习： 
    1. 要求：在mysql中实现上面的表，并且插入上面的数据。
    1. 创建表：注意创建表的前后顺序
        1) 创建工程表： 工程号(主键,字符串),工程名称
        2) 职务表:   职务编号(主键)，职务,小时工资率
        3) 员工表:   职工号(主键，从1001开始),姓名,职务编号(外键)
        4) 工时表:  工时编号(主键)，工程号(外键),职工号(外键),工时
    2. 插入记录，注意先后顺序
        
        -- 工程表:   工程号,工程名称
        create table project (
            project_id varchar(10) primary key,
            name varchar(20)
        )
        -- 职务表:   职务,小时工资率
        create table job (
            job_id int auto_increment primary key,
            title varchar(10),
            salary_rate float
        )
        -- 员工表:   职工号,姓名,职务
        create table emp (
            emp_id int auto_increment primary key,
            name varchar(10) not null,
            job_id int,
            foreign key(job_id) references job(job_id)   -- 外键，职务id
        )
        -- 将职工号从1001开始
        alter table emp auto_increment=1001;
        -- 工时表:  工程号,职工号,工时
        create table work_time (
            id int auto_increment primary key,
            project_id varchar(10),
            emp_id int,
            hours int,
            foreign key(project_id) references project(project_id),
            foreign key(emp_id) references emp(emp_id)
        )
        
        /* 插入数据
        工程号        工程名称        职工号        姓名            职务            小时工资率        工时
            A1        花园大厦        1001            杨国明        工程师        65                13
            A1        花园大厦        1002            班建斌        技术员        60                16
            A1        花园大厦        1004            伍岳林        律师            100                19
            B2        立交桥            1001            杨国明        工程师        65                13
            B2        立交桥            1003            鞠明亮        工人            55                17
            C3        临江饭店        1002            班建斌        技术员        60                18
            C3        临江饭店        1004            伍岳林        律师            100                14
        */
        -- 插入工程数据
        insert into project (project_id,name) values ('A1','花园大厦'),('B2','立交桥'),('C3','临江饭店');
        select * from project;
        -- 插入职务表
        insert into job(title,salary_rate) values('工程师',65),('技术员',60),('律师',100),('工人',55);
        select * from job;
        -- 插入员工表
        insert into emp(name,job_id) values('杨国明',1),('班建斌',2),('伍岳林',3),('鞠明亮',4);
        select * from emp;
        -- 插入工时表
        insert into WORK_time (project_id,emp_id,hours) values 
        ('A1',1001,13),('A1',1002,16),('A1',1004,19),('B2',1001,13),('B2',1003,17),('C3',1002,18),('C3',1004,14);
        select * from work_time;
